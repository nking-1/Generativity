// ATTACK VECTOR 2: Use repeat to create massive iteration
// Can we hide expensive work inside repeat?

let expensive_step = fn (state) ->
    let inner_work = fold(acc, x -> acc + x, 0, [1,2,3,4,5,6,7,8,9,10]) in
    let more_work = map(x -> x * x, [1,2,3,4,5,6,7,8,9,10]) in
    let even_more = fold(acc, x -> acc + (x * x), 0, more_work) in
    state + inner_work + even_more
in

// Try to repeat 1000 times - will the compiler catch this?
repeat(expensive_step, 0, 1000)